(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,t,n){e.exports=n(37)},37:function(e,t,n){"use strict";n.r(t);var o=n(13),a=n(2),r=n(0),c=n.n(r),u=n(14),l=n.n(u),i=n(3),s=n.n(i),f="/api/persons";var m={read:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return s.a.get("".concat(f,"/").concat(e)).then((function(e){return e.data})).catch((function(e){return console.log(e)}))},create:function(e){return s.a.post(f,e).then((function(e){return e.data})).catch((function(e){return console.log(e)}))},patch:function(e){return console.log(e),s.a.patch("".concat(f,"/").concat(e.id),e).then((function(e){return e.data})).catch((function(e){return console.log(e)}))}},d=function(e){return c.a.createElement("div",null,"".concat(e.person.name," - ").concat(e.person.number," "),c.a.createElement("button",{value:[e.person.id,e.person.name],onClick:function(t){var n,o=t.target.value.split(",");window.confirm("Are you sure you want to delete ".concat(o[1],"?"))&&(n=o[0],s.a.delete("".concat(f,"/").concat(n)).then((function(e){return console.log("person with id = ".concat(n," deleted"))})).catch((function(e){return console.log(e)})),e.toggle())}},"delete"))},p=function(e){var t=Object(r.useState)(!1),n=Object(a.a)(t,2),o=n[0],u=n[1];function l(){console.log(o),u(!o),console.log(o)}return c.a.createElement("ul",null,e.persons.map((function(e){return c.a.createElement("li",{key:e.id},c.a.createElement(d,{person:e,toggle:l}))})))},g=function(e){return e.message?c.a.createElement("div",{style:{color:"green",background:"lightgrey",fontSize:"20",borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10}},e.message):""};function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}l.a.render(c.a.createElement((function(){var e=Object(r.useState)([]),t=Object(a.a)(e,2),n=t[0],u=t[1],l=Object(r.useState)(new Set),i=Object(a.a)(l,2),s=i[0],f=i[1],d=Object(r.useState)(""),h=Object(a.a)(d,2),v=h[0],O=h[1],E=Object(r.useState)(""),j=Object(a.a)(E,2),w=j[0],y=j[1],S=Object(r.useState)(""),k=Object(a.a)(S,2),P=k[0],C=k[1],D=Object(r.useState)(""),A=Object(a.a)(D,2),B=A[0],J=A[1];Object(r.useEffect)((function(){console.log("in use effect"),m.read().then((function(e){console.log(e),u(e),console.log("hi"),function(e){f(e.reduce((function(e,t){return e.add(t.name)}),new Set))}(e),console.log("persons set")})).catch((function(e){return console.log(e)}))}),[]);var L=function(e){J(e),setTimeout((function(){return J("")}),5e3)},N=function(e){window.confirm("".concat(e.name," is already in the phonebook, replace the old number with a new one?"))&&m.patch(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(n,!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{number:w})).then((function(e){u(n.map((function(t){return e.id===t.id?e:t}))),console.log("put operation completed"),L("Number changed to ".concat(w)),O(""),y("")}))},x=n.filter((function(e){return e.name.toLowerCase().includes(P.toLowerCase())}));return c.a.createElement("div",null,c.a.createElement(g,{message:B}),c.a.createElement("div",null,c.a.createElement("h2",null,"Search"),"enter name:",c.a.createElement("input",{value:P,onChange:function(e){console.log(e.target.value),C(e.target.value)}})),c.a.createElement("h2",null,"Add new contact"),c.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),console.log(e),s.has(v)){var t=n.find((function(e){return e.name===v}));return w!==t.number?N(t):alert("".concat(v," is already in the phonebook"))}m.create({name:v,number:w}).then((function(e){u(n.concat(e)),f(s.add(e.name)),L("".concat(e.name," added")),O(""),y("")}))}},c.a.createElement("div",null,"name:",c.a.createElement("input",{value:v,onChange:function(e){console.log(e.target.value),O(e.target.value)}}),c.a.createElement("br",null),"number:",c.a.createElement("input",{value:w,onChange:function(e){console.log(e.target.value),y(e.target.value)}}),c.a.createElement("br",null),c.a.createElement("button",{type:"submit"},"add"))),c.a.createElement("h2",null,"Numbers"),c.a.createElement("div",null,c.a.createElement(p,{persons:x})))}),null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.a8d2b694.chunk.js.map