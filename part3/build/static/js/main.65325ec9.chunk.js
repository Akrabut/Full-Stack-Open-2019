(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,t,n){e.exports=n(37)},37:function(e,t,n){"use strict";n.r(t);var o=n(13),r=n(2),a=n(0),c=n.n(a),u=n(14),l=n.n(u),i=n(3),s=n.n(i),f="/api/persons";var m={read:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return s.a.get("".concat(f,"/").concat(e)).then((function(e){return e.data})).catch((function(e){return console.log(e)}))},create:function(e){return s.a.post(f,e).then((function(e){return e.data}))},patch:function(e){return console.log(e),s.a.patch("".concat(f,"/").concat(e.id),e).then((function(e){return e.data}))}},d=function(e){return c.a.createElement("div",null,"".concat(e.person.name," - ").concat(e.person.number," "),c.a.createElement("button",{value:[e.person.id,e.person.name],onClick:function(t){var n,o=t.target.value.split(",");window.confirm("Are you sure you want to delete ".concat(o[1],"?"))&&(n=o[0],s.a.delete("".concat(f,"/").concat(n)).then((function(e){return console.log("person with id = ".concat(n," deleted"))})).catch((function(e){return console.log(e)})),e.toggle())}},"delete"))},p=function(e){var t=Object(a.useState)(!1),n=Object(r.a)(t,2),o=n[0],u=n[1];function l(){console.log(o),u(!o),console.log(o)}return c.a.createElement("ul",null,e.persons.map((function(e){return c.a.createElement("li",{key:e.id},c.a.createElement(d,{person:e,toggle:l}))})))},b=function(e){var t={color:e.color,background:"lightgrey",fontSize:"20",borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return e.message?c.a.createElement("div",{style:t},e.message):""};function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}l.a.render(c.a.createElement((function(){var e=Object(a.useState)([]),t=Object(r.a)(e,2),n=t[0],u=t[1],l=Object(a.useState)(new Set),i=Object(r.a)(l,2),s=i[0],f=i[1],d=Object(a.useState)(""),h=Object(r.a)(d,2),O=h[0],v=h[1],j=Object(a.useState)(""),E=Object(r.a)(j,2),w=E[0],y=E[1],S=Object(a.useState)(""),k=Object(r.a)(S,2),P=k[0],C=k[1],D=Object(a.useState)(""),A=Object(r.a)(D,2),B=A[0],J=A[1],L=Object(a.useState)(""),N=Object(r.a)(L,2),x=N[0],z=N[1];Object(a.useEffect)((function(){console.log("in use effect"),m.read().then((function(e){console.log(e),u(e),function(e){f(e.reduce((function(e,t){return e.add(t.name)}),new Set))}(e),console.log("persons set")})).catch((function(e){return console.log(e)}))}),[]);var I=function(e,t){J(e),z(t),v(""),y(""),setTimeout((function(){return J("")}),5e3)},R=function(e){window.confirm("".concat(e.name," is already in the phonebook, replace the old number with a new one?"))&&m.patch(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{number:w})).then((function(e){u(n.map((function(t){return e.id===t.id?e:t}))),console.log("put operation completed"),I("Number changed to ".concat(w),"green"),v(""),y("")})).catch((function(e){return I(e.response.data.error,"red")}))},T=n.filter((function(e){return e.name.toLowerCase().includes(P.toLowerCase())}));return c.a.createElement("div",null,c.a.createElement(b,{message:B,color:x}),c.a.createElement("div",null,c.a.createElement("h2",null,"Search"),"enter name:",c.a.createElement("input",{value:P,onChange:function(e){console.log(e.target.value),C(e.target.value)}})),c.a.createElement("h2",null,"Add new contact"),c.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),console.log(e),s.has(O)){var t=n.find((function(e){return e.name===O}));return w!==t.number?R(t):alert("".concat(O," is already in the phonebook"))}m.create({name:O,number:w}).then((function(e){u(n.concat(e)),f(s.add(e.name)),I("".concat(e.name," added"),"green"),v(""),y("")})).catch((function(e){return I(e.response.data.error,"red")}))}},c.a.createElement("div",null,"name:",c.a.createElement("input",{value:O,onChange:function(e){console.log(e.target.value),v(e.target.value)}}),c.a.createElement("br",null),"number:",c.a.createElement("input",{value:w,onChange:function(e){console.log(e.target.value),y(e.target.value)}}),c.a.createElement("br",null),c.a.createElement("button",{type:"submit"},"add"))),c.a.createElement("h2",null,"Numbers"),c.a.createElement("div",null,c.a.createElement(p,{persons:T})))}),null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.65325ec9.chunk.js.map